# FLL 2026-2027 ã‚·ãƒ¼ã‚ºãƒ³ ãƒ­ãƒœãƒƒãƒˆã‚²ãƒ¼ãƒ 

FIRST LEGO League 2026-2027ã‚·ãƒ¼ã‚ºãƒ³ã®ãƒ­ãƒœãƒƒãƒˆã‚²ãƒ¼ãƒ ç”¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚  
Pybricks + LEGO SPIKE Prime Hub ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚  
æŽ¨å¥¨Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³: **3.9.6**ï¼ˆpyenv ãªã©ã§å›ºå®šã™ã‚‹ã“ã¨ã‚’æŽ¨å¥¨ï¼‰

## ðŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash

# Python ãƒãƒ¼ã‚¸ãƒ§ãƒ³

- æŽ¨å¥¨: Python 3.9.6
- pyenv ã‚’ä½¿ã†å ´åˆ

pyenv install 3.9.6        # æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãªã‚‰

pyenv local 3.9.6          # ãƒªãƒã‚¸ãƒˆãƒªç›´ä¸‹ã§å›ºå®š


# ä»®æƒ³ç’°å¢ƒã®ä½œæˆï¼ˆPython 3.9.6 ã‚’ä½¿ç”¨ï¼‰
python -m venv .venv

# ä»®æƒ³ç’°å¢ƒã®æœ‰åŠ¹åŒ–
# Windows (PowerShell)
.venv\Scripts\activate

# Mac / Linux
source .venv/bin/activate

# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt
```

### 2. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œæ–¹æ³•

#### æ–¹æ³•A: ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼ˆç«¶æŠ€æœ¬ç•ªç”¨ï¼‰

1. VS Code ã§ `selector.py` ã‚’é–‹ã„ã¦å®Ÿè¡Œï¼ˆF5ï¼‰
2. ãƒãƒ–ã® **å·¦å³ãƒœã‚¿ãƒ³** ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é¸æŠžï¼ˆç•ªå·ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
3. **ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼**ï¼ˆPort.Cï¼‰ã‚’æŠ¼ã—ã¦å®Ÿè¡Œ

| è¡¨ç¤ºç•ªå· | ãƒ—ãƒ­ã‚°ãƒ©ãƒ  (runs/ é…ä¸‹) | ãƒŸãƒƒã‚·ãƒ§ãƒ³ |
|:--------:|-------------------------|------------|
| 1 | run01/main.py | M08, M06, M05 |
| 2 | run02/main.py | M09, M07 |
| 3 | run03/main.py | M10, M11 |
| 4 | run04/main.py | M12 |
| 5 | run05/main.py | M01, M02 |
| 6 | run06/main.py | M13, M03 |

#### æ–¹æ³•B: å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®ç›´æŽ¥å®Ÿè¡Œï¼ˆé–‹ç™ºç”¨ï¼‰

1. å®Ÿè¡Œã—ãŸã„ `runs/runXX/main.py` ã‚’é–‹ã
2. **F5** ã‚’æŠ¼ã—ã¦ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã‹ã‚‰ãƒ­ãƒœãƒƒãƒˆã‚’é¸æŠž

### 3. ã‚³ãƒ¼ãƒ‰è‡ªå‹•è£œæ­£ï¼ˆlint/formatï¼‰

- ä¾å­˜ã‚’å°Žå…¥: `pip install -r requirements.txt`ï¼ˆé–‹ç™ºç”¨ãƒ„ãƒ¼ãƒ«ã‚‚å«ã‚€ï¼‰
- ä¸€æ‹¬æ•´å½¢ï¼ˆruff ã§è‡ªå‹•ä¿®æ­£ï¼‹black ã§æ•´å½¢ï¼‰:
  - **Mac / Linux**: `./tools/format.sh`
  - **Windows (PowerShell)**: `.\tools\format.ps1`
- è©³ç´°ãªæ‰‹é †ã¯ `docs/DEV_GUIDE.md` ã‚’å‚ç…§

æ§‹æˆæ–¹é‡ã®è¦ç‚¹  

- run ã”ã¨ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ‡ã‚Šã€å…¥å£ã¯ `runXX/main.py` ã§çµ±ä¸€  
- è©¦ä½œãƒ»ä½œè€…åˆ¥ãƒ»è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’ `runs/runXX/variants/` ã‚„ `runs/runXX/assets/` ã«ç½®ã‘ã‚‹æ‹¡å¼µæ€§ã‚’ç¢ºä¿  
- è©³ç´°ã¯ `docs/STRUCTURE.md` ã‚’å‚ç…§

### 4. é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ / æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰

`selector.py` å†…ã® `dev` ãƒ•ãƒ©ã‚°ã§åˆ‡ã‚Šæ›¿ãˆï¼š

```python
dev = True   # é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°æœ‰åŠ¹ï¼‰
dev = False  # æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼ˆã‚»ãƒ³ã‚µãƒ¼ãƒ­ã‚°ãªã—ã€å‹•ä½œè»½é‡ï¼‰
```

### 5. ãƒ­ã‚°å‡ºåŠ›

- selector çµŒç”±ã§ run ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’ `logs/` ã«åŒæ™‚ä¿å­˜ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ä¾‹: `run01-YYYYMMDD-HHMMSS.log`ï¼‰
- `logs/` ã¯è‡ªå‹•ç”Ÿæˆã•ã‚Œã€gitignore æ¸ˆã¿
- è©³ç´°ãªæ§‹æˆãƒ»é‹ç”¨æ–¹é‡ã¯ `docs/STRUCTURE.md` ã‚’å‚ç…§

## ðŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```sh
FLL-2026-2027-Season-Robot-Game/
â”œâ”€â”€ runs/                   # ç«¶æŠ€ç”¨ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆrunã”ã¨ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
â”‚   â”œâ”€â”€ run01/
â”‚   â”‚   â”œâ”€â”€ main.py                  # ACTIVE_VARIANTã§å®Ÿè£…ã‚’é¸æŠž
â”‚   â”‚   â”œâ”€â”€ m08_m06_m05.py           # å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³/ä½œè€…ã”ã¨ã«è¿½åŠ ï¼‰
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ run02/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ m09_m07.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ run03/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ m10_m11.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ run04/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ m12.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ run05/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ m01_m02_kanna.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ run06/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ m13_m03.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ _template/          # æ–°è¦ä½œæˆç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ selector.py             # ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ï¼ˆç«¶æŠ€ç”¨ï¼‰
â”œâ”€â”€ setup.py                # ãƒ­ãƒœãƒƒãƒˆåˆæœŸåŒ–ï¼ˆå…±é€šè¨­å®šï¼‰
â”œâ”€â”€ requirements.txt        # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆãƒ©ãƒ³ã‚¿ã‚¤ãƒ +é–‹ç™ºãƒ„ãƒ¼ãƒ«ï¼‰
â”œâ”€â”€ .vscode/launch.json     # VS Code ãƒ‡ãƒãƒƒã‚°è¨­å®š
â”œâ”€â”€ pyproject.toml          # ruff / black ã®è¨­å®š
â”œâ”€â”€ tools/format.sh         # è‡ªå‹•è£œæ­£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ docs/
    â”œâ”€â”€ DEV_GUIDE.md        # é–‹ç™ºæ‰‹é †ãƒ»å…±é€šé–¢æ•°ã®ä½¿ã„æ–¹
    â””â”€â”€ STRUCTURE.md        # æ§‹æˆæ–¹é‡ï¼ˆrunã”ã¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª + å¤‰ç¨®/è³‡ç”£ã‚‚æ ¼ç´ï¼‰
â””â”€â”€ old/2025-2026/      # æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```

æ§‹æˆã®è©³ç´°æ–¹é‡ï¼ˆrunã”ã¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé‹ç”¨ï¼‰ ã¯ `docs/STRUCTURE.md` ã‚’å‚ç…§ã€‚

## ðŸ¤– ãƒ­ãƒœãƒƒãƒˆæ§‹æˆ

| ãƒãƒ¼ãƒˆ | ãƒ‡ãƒã‚¤ã‚¹ | èª¬æ˜Ž |
|--------|---------|------|
| Port.F | å·¦ã‚¿ã‚¤ãƒ¤ | åæ™‚è¨ˆå›žã‚ŠãŒæ­£ |
| Port.B | å³ã‚¿ã‚¤ãƒ¤ | æ™‚è¨ˆå›žã‚ŠãŒæ­£ |
| Port.E | å·¦ãƒªãƒ•ãƒˆ | æ™‚è¨ˆå›žã‚ŠãŒæ­£ |
| Port.A | å³ãƒªãƒ•ãƒˆ | æ™‚è¨ˆå›žã‚ŠãŒæ­£ |
| Port.C | ãƒ•ã‚©ãƒ¼ã‚¹ã‚»ãƒ³ã‚µãƒ¼ | ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè¡Œãƒœã‚¿ãƒ³ |

## ðŸ“ æ–°ã—ã„runãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆæ–¹æ³•

1. `runs/_template` ã‚’ä¸¸ã”ã¨ã‚³ãƒ”ãƒ¼ã—ã¦ `runs/run07/` ã®ã‚ˆã†ã«ä¿å­˜ï¼ˆrunç•ªå·ã¯2æ¡ãŒç›®å®‰ï¼‰
2. `runs/run07/main.py` ã® `run()` é–¢æ•°å†…ã«ãƒ­ãƒœãƒƒãƒˆã®å‹•ä½œã‚’è¨˜è¿°
3. `selector.py` ã® `programs` ãƒªã‚¹ãƒˆã«è¿½åŠ ï¼š

```python
from runs.run07 import main as run07_main  # ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

programs = [
    # ... æ—¢å­˜ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
    {"module": run07_main, "display_number": 7},  # è¿½åŠ 
]
```

### ä½¿ç”¨å¯èƒ½ãªã‚³ãƒžãƒ³ãƒ‰

```python
# ç§»å‹•ç³»ï¼ˆspeed, timeout ã‚ªãƒ—ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
await robot.straight(400)                  # 400mmç›´é€²
await robot.straight(200, speed=500)       # 500mm/sã§200mmç›´é€²
await robot.straight(500, timeout=3000)    # 3ç§’ä»¥å†…ã«500mmç›´é€²
await robot.turn(90)                       # 90åº¦å³å›žè»¢
await robot.turn(-45, rate=300)            # 300deg/sã§45åº¦å·¦å›žè»¢
await robot.curve(200, 90)                 # åŠå¾„200mmã§90åº¦ã‚«ãƒ¼ãƒ–

# ãƒ¢ãƒ¼ã‚¿ãƒ¼æ“ä½œ
await robot.run_motor(left_lift, 180)      # å·¦ã‚¢ãƒ¼ãƒ ã‚’180åº¦å›žè»¢
await robot.run_motor(right_lift, -360, speed=500)  # å³ã‚¢ãƒ¼ãƒ ã‚’é€†æ–¹å‘ã«1å›žè»¢
await left_lift.run_angle(300, 180)        # å·¦ã‚¢ãƒ¼ãƒ ã‚’180åº¦å›žè»¢ï¼ˆå¾“æ¥ã®æ–¹æ³•ï¼‰
await right_lift.run_angle(500, -360)      # å³ã‚¢ãƒ¼ãƒ ã‚’é€†æ–¹å‘ã«1å›žè»¢ï¼ˆå¾“æ¥ã®æ–¹æ³•ï¼‰

# å¾…æ©Ÿ
await wait(500)                            # 0.5ç§’å¾…æ©Ÿ
```

## âš™ï¸ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé€Ÿåº¦è¨­å®š

| å‹•ä½œ | é€Ÿåº¦ | åŠ é€Ÿåº¦ |
|------|------|--------|
| ç›´é€² | 400 mm/s | 500 mm/sÂ² |
| å›žè»¢ | 240 deg/s | 850 deg/sÂ² |
| ã‚«ãƒ¼ãƒ– | 240 mm/s | 800 mm/sÂ² |

è¨­å®šã¯ `setup.py` ã® `DEFAULT_*_SETTINGS` ã§å¤‰æ›´å¯èƒ½ã§ã™ã€‚

## ðŸ”§ è¤‡æ•°ãƒ­ãƒœãƒƒãƒˆã®åˆ‡ã‚Šæ›¿ãˆ

VS Code ã®ãƒ‡ãƒãƒƒã‚°ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ä½¿ç”¨ã™ã‚‹ãƒ­ãƒœãƒƒãƒˆã‚’é¸æŠžã§ãã¾ã™ï¼š

- ðŸ¤– Robot 1 (Pybricks Hub)
- ðŸ¤– Robot 2 (Pybricks Hub2)
- ðŸ¤– Robot 3 (Pybricks Hub3)

## ðŸ“š æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Pybricks** >= 3.6.1
- **pybricksdev** >= 1.0.0a49
- LEGO SPIKE Prime Hub
